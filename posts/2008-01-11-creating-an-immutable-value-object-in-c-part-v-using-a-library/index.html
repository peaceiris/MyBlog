<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#ffffff"/>


<meta name="description" content="Other posts:
  Part I - Using a class
  Part II - Making the class better
 Part III - Using a struct Part IV - A class with a special value In the last post we presented a variation of implementing a value object using a class. Everything works (obviously), but the amount of code to write is unpleasing. In this post we examine a library based solution.">





<link rel="preload" href="../../fonts/SourceSerifVariable-Roman.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="../../fonts/SourceSansVariable-Roman.woff2" as="font" type="font/woff2" crossorigin="anonymous">

<link rel="stylesheet" href="../../css/base.css"> 
<link rel="stylesheet" href="../../css/fonts.css">


  <link rel="preload" href="../../fonts/SourceCodeVariable-Roman.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="../../fonts/SourceCodeVariable-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="../../fonts/SourceSerifVariable-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">



  <title>Creating an immutable value object in C# - Part V - Using a library | Lucabol blog</title>


<link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="manifest" href="../../site.webmanifest">
    </head>
<body>
    <header>
        <div id="topnav">
            <a id="logo" href="../../">‚ùß</a>
            
                <time id="blog_date" > 2008/01/01</time>
            
            <span class="offline">~~ Offline ~~</span>
            <span class="rightnav">
                <a id="theme">theme</a><div class="dropdown-content">
          <a class="font-name" data-classname="OpenDyslexic" >0. OpenDyslexic</a>
          <a class="font-name" data-classname="Cardo" >1. Se Old Style: Cardo (Minion, Gallard, Centaur)</a>
          <a class="font-name" data-classname="CrimsonPro" >1. Se Old Style: Crimson Pro (Century, Palatino, Plantin, Sabon)</a>
          <a class="font-name" data-classname="EBGaramond" >1. Se Old Style: Garamond</a>
          <a class="font-name" data-classname="Gentium" >1. Se Old Style: Gentium</a>
          <a class="font-name" data-classname="GoudyStM" >1. Se Old Style: Sorts Mill Goudy</a>
          <a class="font-name" data-classname="LibreBaskerville" >4. Se Transitional: Libre Bask. (Mrs Eaves)</a>
          <a class="font-name" data-classname="LibreCaslon" >4. Se Transitional: Libre Caslon</a>
          <a class="font-name" data-classname="PT" >4. Se Transitional: PT fonts (Le Monde)</a>
          <a class="font-name" data-classname="SourcePro" >4. Se Transitional: Source Pro (Skolar, Fournier)</a>
          <a class="font-name" data-classname="TimesNewRoman" >4. Se Transitional: Times New Roman</a>
          <a class="font-name" data-classname="CM" >5. Se Didone: Computer Modern</a>
          <a class="font-name" data-classname="OldStandardTT" >5. Se Didone: Old Standard TT (Filosofia, Scotch Modern)</a>
          <a class="font-name" data-classname="STIX2" >5. Se Didone: Stix2</a>
          <a class="font-name" data-classname="Charter" >6. Se Scotch: Charter</a>
          <a class="font-name" data-classname="Georgia" >6. Se Scotch: Georgia</a>
          <a class="font-name" data-classname="WorkSans" >8. Sa Grotesque: Work Sans (All Grotesque, FF Bau, Venus)</a>
          <a class="font-name" data-classname="AntiqueOlive" >9. Sa Geometric: Antique Oliv</a>
          <a class="font-name" data-classname="bahnschrift" >9. Sa Geometric: Bahnschrift</a>
          <a class="font-name" data-classname="CooperHewitt" >9. Sa Geometric: Cooper Hewitt (Calibre)</a>
          <a class="font-name" data-classname="SourceSans" >9. Sa Humanist: Source Sans (Balto, Adelle Sans)</a>
          <a class="font-name" data-classname="URWClassico" >9. Sa Humanist: URW Classico (Optima)</a>
          <a class="font-name" data-classname="FiraSans" >a. Sa Humanist: Fira Sans (FF Meta)</a>
          <a class="font-name" data-classname="Nimbus" >a. Sa Humanist: Nimbus (Helvetica)</a>
          <a class="font-name" data-classname="Roboto" >a. Sa Humanist: Roboto (DIN</a>
          <a class="font-name" data-classname="Munson" >b. Sl Grotesque: Munson (Clarendon)</a>
          <a class="font-name" data-classname="Sanchez" >c. Sl Geometric: Sanchez (Rockwell)</a>
          <a class="font-name" data-classname="Enriqueta" >d. Sl Humanist: Enriqueta (PMN Caecilia)</a>
          <a class="font-name" data-classname="Merriweather" >d. Sl Humanist: Merriweather (Chapparal)</a>
          <a class="font-name" data-classname="profont" >Z. Sa Monospace: Profont</a>
</div>
                <a id="to_nav">Menu</a>
                <nav id="primary_nav">
                    

  <a href="../../MyBlog/">home</a>
  <a href="../../MyBlog/tags/">tags</a>
  <a href="https://www.github.com/lucabol">github</a>
  <a href="https://www.linkedin.com/in/lucabolognese/">linkdin</a>
  <a href="../../MyBlog/search">search</a>
  <a href="../../MyBlog/index.xml">rss</a>
                </nav>
            </span>
        </div>
    <h1 id="title">
    
        Creating an immutable value object in C# - Part V - Using a library
    
    </h1>

    </header>

    <main>
        

<p>Other posts:</p>
<ul>
<li>
<p><a href="http://blogs.msdn.com/lucabol/archive/2007/12/03/creating-an-immutable-value-object-in-c-part-i-using-a-class.aspx">Part I  - Using a class</a></p>
<ul>
<li>
<p><a href="http://blogs.msdn.com/lucabol/archive/2007/12/06/creating-an-immutable-value-object-in-c-part-ii-making-the-class-better.aspx">Part II  - Making the class better</a></p>
<ul>
<li><a href="http://blogs.msdn.com/lucabol/archive/2007/12/24/creating-an-immutable-value-object-in-c-part-iii-using-a-struct.aspx">Part III  - Using a struct</a></li>
<li><a href="http://blogs.msdn.com/lucabol/">Part IV  - A class with a special value</a>
In the last post we presented a variation of implementing a value object using a class. Everything works (obviously), but the amount of code to write is unpleasing. In this post we examine a library based solution. I just describe how to use the Record class, not how it is implemented. You can read the attached implementation code (it is in functional.cs). There is much more in there than Record&lt;&gt;. I&rsquo;ll talk about the rest in a (hopefully) upcoming series.</li>
</ul>
<p>To use the record class you need to inherit from it, as in:</p>
<pre class="code"><span style="color:rgb(0,0,255);">public</span> <span style="color:rgb(0,0,255);">class</span> <span style="color:rgb(43,145,175);">DateSpan</span>: <span style="color:rgb(43,145,175);">Record</span>&lt;<span style="color:rgb(43,145,175);">DateTime</span>, <span style="color:rgb(43,145,175);">DateTime</span>, <span style="color:rgb(0,0,255);">bool</span>&gt; {...}</pre>
<p>The generic argument types represent the types that comprise the (immutable) state of the object. You then need a friendly way for folks to access this state:</p>
<pre class="code"><span style="color:rgb(0,0,255);">public</span> <span style="color:rgb(43,145,175);">DateTime</span> Start { <span style="color:rgb(0,0,255);">get</span> { <span style="color:rgb(0,0,255);">return</span> state.Item1; } }
</li>
</ul>
<p><span style="color:rgb(0,0,255);">public</span> <span style="color:rgb(43,145,175);">DateTime</span> End { <span style="color:rgb(0,0,255);">get</span> { <span style="color:rgb(0,0,255);">return</span> state.Item2; } }
<span style="color:rgb(0,0,255);">public</span> <span style="color:rgb(0,0,255);">bool</span> HasValue { <span style="color:rgb(0,0,255);">get</span> { <span style="color:rgb(0,0,255);">return</span> state.Item3; } }
</pre></p>
<pre><code>This is all you have to do. You don't need to implement Equals, ==, != and GetHashCode. Structural equivalence is given to you by the Record class. Such a property is recursive, in the sense that you can embed value objects inside other value objects and the implementation would walk your object graph as necessary.
    
For example, given the following class hierarchy:
    
&lt;pre class=&quot;code&quot;&gt;&lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;class&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Order&lt;/span&gt;: &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Record&lt;/span&gt;&amp;lt;&lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;string&lt;/span&gt;, &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;int&lt;/span&gt;&amp;gt; {
&lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;public&lt;/span&gt; Order(&lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;string&lt;/span&gt; item, &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;int&lt;/span&gt; qty): &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;base&lt;/span&gt;(item,qty) {}
&lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;string&lt;/span&gt; Item { &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;get&lt;/span&gt; { &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;return&lt;/span&gt; state.Item1;}}
&lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;int&lt;/span&gt; Quantity { &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;get&lt;/span&gt; { &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;return&lt;/span&gt; state.Item2; } }
</code></pre>
<p>}
<span style="color:rgb(0,0,255);">public</span> <span style="color:rgb(0,0,255);">class</span> <span style="color:rgb(43,145,175);">Customer</span>: <span style="color:rgb(43,145,175);">Record</span>&lt;<span style="color:rgb(0,0,255);">string</span>, <span style="color:rgb(43,145,175);">IEnumerable</span>&lt;<span style="color:rgb(43,145,175);">Order</span>&gt;&gt; {
<span style="color:rgb(0,0,255);">public</span> Customer(<span style="color:rgb(0,0,255);">string</span> name, <span style="color:rgb(43,145,175);">IEnumerable</span>&lt;<span style="color:rgb(43,145,175);">Order</span>&gt; orders) : <span style="color:rgb(0,0,255);">base</span>(name, orders) { }
<span style="color:rgb(0,0,255);">public</span> <span style="color:rgb(0,0,255);">string</span> Name { <span style="color:rgb(0,0,255);">get</span> { <span style="color:rgb(0,0,255);">return</span> state.Item1; } }
<span style="color:rgb(0,0,255);">public</span> <span style="color:rgb(43,145,175);">IEnumerable</span>&lt;<span style="color:rgb(43,145,175);">Order</span>&gt; Orders { <span style="color:rgb(0,0,255);">get</span> { <span style="color:rgb(0,0,255);">return</span> state.Item2; } }
}</pre></p>
<pre><code>The following test case succeed:
    
&lt;pre class=&quot;code&quot;&gt;[&lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;TestMethod&lt;/span&gt;]
&lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;void&lt;/span&gt; Record2Test() {
    &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;var&lt;/span&gt; c1 = &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Customer&lt;/span&gt;(&lt;span style=&quot;color:rgb(163,21,21);&quot;&gt;&quot;Luca&quot;&lt;/span&gt;, &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Order&lt;/span&gt;[] { &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Order&lt;/span&gt;(&lt;span style=&quot;color:rgb(163,21,21);&quot;&gt;&quot;car&quot;&lt;/span&gt;,1), &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Order&lt;/span&gt;(&lt;span style=&quot;color:rgb(163,21,21);&quot;&gt;&quot;stereo&quot;&lt;/span&gt;, 3)});
    &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;var&lt;/span&gt; c11 = &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Customer&lt;/span&gt;(&lt;span style=&quot;color:rgb(163,21,21);&quot;&gt;&quot;Luca&quot;&lt;/span&gt;, &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Order&lt;/span&gt;[] { &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Order&lt;/span&gt;(&lt;span style=&quot;color:rgb(163,21,21);&quot;&gt;&quot;car&quot;&lt;/span&gt;, 1), &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Order&lt;/span&gt;(&lt;span style=&quot;color:rgb(163,21,21);&quot;&gt;&quot;stereo&quot;&lt;/span&gt;, 3) });
    &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;var&lt;/span&gt; c2 = &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Customer&lt;/span&gt;(&lt;span style=&quot;color:rgb(163,21,21);&quot;&gt;&quot;Bob&quot;&lt;/span&gt;, &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Order&lt;/span&gt;[] { &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Order&lt;/span&gt;(&lt;span style=&quot;color:rgb(163,21,21);&quot;&gt;&quot;car&quot;&lt;/span&gt;, 1), &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Order&lt;/span&gt;(&lt;span style=&quot;color:rgb(163,21,21);&quot;&gt;&quot;stereo&quot;&lt;/span&gt;, 3) });
    &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;var&lt;/span&gt; c3 = &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Customer&lt;/span&gt;(&lt;span style=&quot;color:rgb(163,21,21);&quot;&gt;&quot;Bob&quot;&lt;/span&gt;, &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Order&lt;/span&gt;[] { &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Order&lt;/span&gt;(&lt;span style=&quot;color:rgb(163,21,21);&quot;&gt;&quot;car&quot;&lt;/span&gt;, 1), &lt;span style=&quot;color:rgb(0,0,255);&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Order&lt;/span&gt;(&lt;span style=&quot;color:rgb(163,21,21);&quot;&gt;&quot;stereo&quot;&lt;/span&gt;, 2) });
    &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Assert&lt;/span&gt;.AreEqual(c1, c11);
    &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Assert&lt;/span&gt;.AreNotEqual(c1, c2);
    &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Assert&lt;/span&gt;.AreNotEqual(c1, c3);
    &lt;span style=&quot;color:rgb(43,145,175);&quot;&gt;Assert&lt;/span&gt;.AreNotEqual(c2, c3);
}&lt;/pre&gt;
    
Please don't take my library as production ready code. The amount of test I put into it is limited. You can probably find obvious bugs with it. 
    
Let's look at other drawbacks. The biggest one is that I'm stealing your base class. If you want your value object to inherit from something else, you cannot. You cannot even have value objects inherit from each other. In that case you are back to implementing your own Equals, == and so on. The only tools at your disposal are interfaces and composition.
    
Another drawback is that writing classes in this way is slightly unnatural. You have to think about the &amp;#8216;type' of your state in the declaration of the class itself instead of more naturally writing it closer to where you assign names to it (property/field declaration).
    
Having considered these drawbacks, I'm using this library in all my code wherever I need value objects (which is almost everywhere these days). Writing all the Equals explicitly is too error prone for my taste. I will also be creating IDE snippets for myself that make writing these classes easier.
    
I don't think I have anything else to say on this topic, so this will be my last post on it. If something else comes up, I'll let you know.
    
[TimeLineUsingRecord.zip](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Components.PostAttachments/00/07/07/77/13/TimeLineUsingRecord.zip)</code></pre>
</li>
</ul>



  
  <div id="disqus-container">
  
    <button id="disqus-button" onclick="showComments()">Show comments</button>
    <div id="disqus-comments">
      
      
      
        <div id="disqus_thread">
        </div>
        <script type="application/javascript">
          function showComments() {
            var disqus_config = function () {
};
// Build and append comments 
var d = document;
var s = d.createElement('script');
s.async = true;
s.src = '//' + "lucabol" + '.disqus.com/embed.js';
s.setAttribute('data-timestamp', + new Date());
(d.head || d.body).appendChild(s);
            // Remove button
var disqusButton = document.getElementById('disqus-button');
disqusButton.parentNode.removeChild(disqusButton); 
// Un-hide comments
var disqusComments = document.getElementById('disqus-comments');
disqusComments.style.display = 'block'; 
          }
        </script>
      
      <noscript>Enable JavaScript to view Disqus comments.</noscript>
    </div>
  
</div>




    </main>

    <aside id="sidebar-left">
        
<div id="tags">
  <header>
    <h1>Tags</h1>
      
    <h2>¬∂</h2>
    
  </header>
  
    
    <nav>
      <ul>
        
            <li><a href="../../MyBlog/tags/csharp">csharp</a></li>
        
      </ul>
    </nav>
    
  
</div>

    </aside>

    <aside id="sidebar-right">
        <section id="TOC">
        
  
    <header>
        <h1>Table of contents</h1>
        <h2>¬∂</h2>
    </header>
    


        </section>
    </aside>

    <a id="to_top" href="#top">Top</a>
    <footer>
        
    </footer>

    <script>
    const th = document.querySelector("#theme")
    th.addEventListener("click", e => {
        const x = document.querySelector(".dropdown-content")
        if (x.style.display === "block") {
            x.removeAttribute("style")
        } else {
            x.style.display = "block";
        }
    })
    const children = document.querySelectorAll(".font-name")
    const allStyles = Array.from(children).map(c => c.dataset.classname)

    const defaultStyle = "TimesNewRoman"
    const retrievedStyle = localStorage.getItem("Style")
    const style = allStyles.includes(retrievedStyle) ? retrievedStyle : defaultStyle
    document.body.className = style;

    const fontEl = document.querySelector(".dropdown-content")
    fontEl.addEventListener("click", e => {
        const el = e.target
        const style = el.dataset.classname
        document.body.className = style;
        localStorage.setItem("Style", style)
    })



</script>
    <script>
const init = () => {

    
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    
    window.ga = window.ga || ((...args) => (ga.q = ga.q || []).push(args));

    ga('create', 'UA-133194891-1', 'auto');
    ga('set', 'transport', 'beacon');
    ga('send', 'pageview');
};


window.addEventListener('load', init);
</script>
    <script>
    if("serviceWorker" in navigator){
        navigator.serviceWorker.register("/sw.js");
    }
</script>
    <script>
    window.addEventListener('offline', (e) => {
        const els = document.getElementsByClassName('offline')
        for(const el of els)
            el.classList.add("show")
        window.caches.keys().then(strikeNonCached)
    })
    window.addEventListener('online', (e) => {
        const els = document.getElementsByClassName('offline')
        for(const el of els)
            el.classList.remove("show")

        const as = document.querySelectorAll('main a')
        for(const a of as)
            a.classList.remove('strike')
    })

    const strikeNonCached = cacheKeys => {
        caches.open(cacheKeys[0]).then(cache =>
            cache.keys().then(keys => {
                const as = document.querySelectorAll('main a')
                const urls = keys.map(k => k.url)
                for(const a of as)
                    if(urls.indexOf(a.href) === -1)    
                        a.classList.add('strike')
    }))}

    if(navigator.onLine)
        window.dispatchEvent(new Event('online'))
    else
        window.dispatchEvent(new Event('offline'))

</script>
    <script>
function variableResize() {

  
  let bodyStyles = window.getComputedStyle(document.body);	
	
  let root = document.documentElement;
	
	
	const maxWindowSize = bodyStyles.getPropertyValue('--bp-xlarge') * 16;
	const minWindowSize = bodyStyles.getPropertyValue('--bp-small') * 16;
	
	
	const windowWidth = window.innerWidth
	
  
  const pWidthVar = '--p-wdth';
	const pMinFontWidth = bodyStyles.getPropertyValue('--p-wdth-min');
	const pMaxFontWidth = bodyStyles.getPropertyValue('--p-wdth-max');
	scale(pWidthVar, pMinFontWidth, pMaxFontWidth);

  const pWeightVar = '--p-wght';
	const pMinFontWeight = bodyStyles.getPropertyValue('--p-wght-min');
	const pMaxFontWeight = bodyStyles.getPropertyValue('--p-wght-max');
	scale(pWeightVar, pMinFontWeight, pMaxFontWeight);
	
  const h1WidthVar = '--h1-wdth';
	const h1MinFontWidth = bodyStyles.getPropertyValue('--h1-wdth-min');
	const h1MaxFontWidth = bodyStyles.getPropertyValue('--h1-wdth-max');
	scale(h1WidthVar, h1MinFontWidth, h1MaxFontWidth);

  const h1WeightVar = '--h1-wght';
	const h1MinFontWeight = bodyStyles.getPropertyValue('--h1-wght-min');
	const h1MaxFontWeight = bodyStyles.getPropertyValue('--h1-wght-max');
	scale(h1WeightVar, h1MinFontWeight, h1MaxFontWeight);
	
  const h2WidthVar = '--h2-wdth';
	const h2MinFontWidth = bodyStyles.getPropertyValue('--h2-wdth-min');
	const h2MaxFontWidth = bodyStyles.getPropertyValue('--h2-wdth-max');
	scale(h2WidthVar, h2MinFontWidth, h2MaxFontWidth);

  const h2WeightVar = '--h2-wght';
	const h2MinFontWeight = bodyStyles.getPropertyValue('--h2-wght-min');
	const h2MaxFontWeight = bodyStyles.getPropertyValue('--h2-wght-max');
	scale(h2WeightVar, h2MinFontWeight, h2MaxFontWeight);
	
	function scale(varName, minValue, maxValue) {
		
		minValue = minValue * 1;
		maxValue = maxValue * 1;

		
		const percent = (windowWidth - minWindowSize) / (maxWindowSize - minWindowSize);
		if (maxValue < minValue) {
			var valueScale = minValue - (percent * (minValue - maxValue));
		} else {
			var valueScale = (percent * (maxValue - minValue)) + minValue;
		}
	  
		
		const newValue = windowWidth > maxWindowSize
		   ? maxValue 
		   : windowWidth < minWindowSize 
				? minValue 
				: valueScale;
	   
		
		root.style.setProperty(varName, newValue);
	}
}

window.addEventListener("load", variableResize);
window.addEventListener("resize", variableResize);

</script>
    <script>
  const el = document.querySelector("#to_nav")
  el.addEventListener("click", e => {
    const x = document.querySelector("#primary_nav")
    if (x.style.display === "block") {
      x.removeAttribute("style")
    } else {
      x.style.display = "block";
    }
  })
  window.addEventListener('click', e => {
    const x = document.querySelector("#primary_nav")
    const y = document.querySelector("#to_nav")
    if (!y.contains(e.target) && x.style.display === "block") {
      x.removeAttribute("style")
    } 

    const th = document.querySelector("#theme")
    const x1 = document.querySelector(".dropdown-content")

    if (!th.contains(e.target) && ! x1.contains(e.target) && x1.style.display === "block") {
      x1.removeAttribute("style")
    } 
  })
</script>

</body>
</html>